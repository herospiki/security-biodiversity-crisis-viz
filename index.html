<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comparaison Visualisations - Approche Critique de l'IA</title>
    <script>
        // Script ex√©cut√© le plus t√¥t possible pour forcer scroll en haut
        window.addEventListener('beforeunload', function() {
            window.scrollTo(0, 0);
        });
        if ('scrollRestoration' in history) {
            history.scrollRestoration = 'manual';
        }
        // Force imm√©diate
        window.scrollTo(0, 0);
        document.addEventListener('DOMContentLoaded', function() {
            window.scrollTo(0, 0);
            document.documentElement.scrollTop = 0;
            document.body.scrollTop = 0;
        });
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;600;700&display=swap');
        
        /* Force la page √† commencer en haut */
        html {
            scroll-behavior: auto !important;
        }
        
        html, body {
            overflow-x: hidden;
            position: relative;
        }
        
        * {
            font-family: 'JetBrains Mono', monospace;
        }
        
        .iframe-container {
            transition: all 0.3s ease;
        }
        
        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .badge-v1 {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.5);
            color: #fca5a5;
        }
        
        .badge-v2 {
            background: rgba(34, 197, 94, 0.2);
            border: 1px solid rgba(34, 197, 94, 0.5);
            color: #86efac;
        }
        
        button {
            transition: all 0.2s ease;
        }
        
        button:hover {
            transform: translateY(-2px);
        }
        
        button.active {
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white min-h-screen">
    <div class="container mx-auto p-6">
        <!-- En-t√™te -->
        <div class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold mb-4 bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent">
                Biodiversit√© & S√©curit√© Nationale
            </h1>
            <p class="text-lg text-slate-300 mb-2">
                Exp√©rimentation week-end : synth√®se visuelle avec IA + approche critique
            </p>
            <p class="text-sm text-slate-400 mb-3">
                Bas√© sur : UK National Security Assessment 2024 (13 pages)
            </p>
            
            <!-- Liens sources -->
            <div class="flex flex-wrap justify-center gap-3 text-sm">
                <a 
                    href="https://assets.publishing.service.gov.uk/media/696e0eae719d837d69afc7de/National_security_assessment_-_global_biodiversity_loss__ecosystem_collapse_and_national_security.pdf"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="inline-flex items-center gap-2 px-4 py-2 bg-slate-700/50 hover:bg-slate-600/50 rounded-lg border border-slate-600/50 hover:border-slate-500 transition"
                >
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                    </svg>
                    <span class="text-slate-300">Document source (PDF)</span>
                </a>
                
                <a 
                    href="https://www.theguardian.com/commentisfree/2026/jan/27/uk-government-report-ecosystem-collapse-foi-national-security"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="inline-flex items-center gap-2 px-4 py-2 bg-slate-700/50 hover:bg-slate-600/50 rounded-lg border border-slate-600/50 hover:border-slate-500 transition"
                >
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"></path>
                    </svg>
                    <span class="text-slate-300">Article Guardian (contexte)</span>
                </a>
            </div>
        </div>

        <!-- Contr√¥les de visualisation -->
        <div class="bg-slate-800/50 backdrop-blur-lg rounded-2xl p-6 mb-6 border border-slate-700/50">
            <div class="flex flex-col md:flex-row items-center justify-between gap-4">
                <!-- Mode d'affichage -->
                <div class="flex flex-col md:flex-row gap-3 w-full md:w-auto">
                    <button 
                        id="btn-v1" 
                        onclick="showView('v1')"
                        class="px-6 py-3 bg-red-600 hover:bg-red-500 rounded-lg font-semibold flex items-center justify-center gap-2 transition"
                    >
                        <span class="badge badge-v1">V1</span>
                        Premi√®re version
                    </button>
                    
                    <button 
                        id="btn-v2" 
                        onclick="showView('v2')"
                        class="px-6 py-3 bg-green-600 hover:bg-green-500 rounded-lg font-semibold flex items-center justify-center gap-2 transition"
                    >
                        <span class="badge badge-v2">V2</span>
                        Apr√®s feedback
                    </button>
                    
                    <button 
                        id="btn-split" 
                        onclick="showView('split')"
                        class="px-6 py-3 bg-blue-600 hover:bg-blue-500 rounded-lg font-semibold flex items-center justify-center gap-2 transition"
                    >
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 4v16m6-16v16"></path>
                        </svg>
                        Comparaison C√¥te √† C√¥te
                    </button>
                </div>
                
                <!-- L√©gende diff√©rences -->
                <div class="text-sm text-slate-400 text-center md:text-right">
                    <div class="font-semibold text-slate-300 mb-1">Principales diff√©rences :</div>
                    <div class="flex flex-wrap gap-2 justify-center md:justify-end">
                        <span class="bg-slate-700/50 px-2 py-1 rounded">‚ö†Ô∏è Disclaimer</span>
                        <span class="bg-slate-700/50 px-2 py-1 rounded">üå± Solutions</span>
                        <span class="bg-slate-700/50 px-2 py-1 rounded">üìä Nuances</span>
                        <span class="bg-slate-700/50 px-2 py-1 rounded">üåæ Exemples</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Explications contextuelles -->
        <div id="context" class="bg-gradient-to-r from-blue-900/30 to-purple-900/30 backdrop-blur-lg rounded-2xl p-6 mb-6 border border-blue-500/30">
            <div class="flex items-start gap-4">
                <div class="text-4xl">üí°</div>
                <div>
                    <h3 class="text-xl font-bold text-blue-300 mb-2">Objectif de cette exp√©rimentation</h3>
                    <p class="text-slate-300 text-sm mb-3">
                        Petit projet week-end pour tester l'importance d'une <strong>approche critique</strong> lors de l'utilisation d'IA g√©n√©rative 
                        pour la <strong>synth√®se documentaire et la visualisation d'information</strong>. Les deux versions sont bas√©es sur le m√™me rapport UK de 13 pages.
                    </p>
                    <div class="grid md:grid-cols-2 gap-4 text-sm">
                        <div class="bg-red-900/20 border border-red-500/30 rounded-lg p-3">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="badge badge-v1">V1</span>
                                <span class="font-bold text-red-300">Premi√®re version</span>
                            </div>
                            <ul class="text-slate-300 space-y-1 text-xs">
                                <li>‚ùå Pas de disclaimer m√©thodologique</li>
                                <li>‚ùå Focus 100% sur les menaces</li>
                                <li>‚ùå Absence de solutions</li>
                                <li>‚ùå Nuances de confiance minimales</li>
                                <li>‚ùå Biais alarmiste</li>
                            </ul>
                        </div>
                        <div class="bg-green-900/20 border border-green-500/30 rounded-lg p-3">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="badge badge-v2">V2</span>
                                <span class="font-bold text-green-300">Apr√®s Feedback Critique</span>
                            </div>
                            <ul class="text-slate-300 space-y-1 text-xs">
                                <li>‚úÖ Disclaimer "worst case scenario"</li>
                                <li>‚úÖ √âquilibre menaces (75%) / solutions (25%)</li>
                                <li>‚úÖ Section Solutions compl√®te</li>
                                <li>‚úÖ Nuances √©pist√©miques d√©taill√©es</li>
                                <li>‚úÖ Ton √©quilibr√© et actionnable</li>
                            </ul>
                        </div>
                    </div>
                    <p class="text-xs text-slate-400 italic mt-3">
                        üí¨ Enseignement : <strong>L'IA comme assistant, pas comme oracle</strong> ‚Äî 
                        M√™me pour un projet rapide, prendre le temps de v√©rifier et questionner fait toute la diff√©rence.
                    </p>
                </div>
            </div>
        </div>

        <!-- Zone d'affichage des visualisations -->
        <div id="view-container" class="relative">
            <!-- Vue V1 seule -->
            <div id="view-v1" class="hidden iframe-container">
                <div class="bg-slate-800/50 backdrop-blur-lg rounded-t-2xl p-4 border-b border-slate-700/50 flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <span class="badge badge-v1">Version 1</span>
                        <span class="text-slate-300 font-semibold">Premi√®re version (sortie brute IA)</span>
                    </div>
                    <button onclick="openFullscreen('v1')" class="px-3 py-1 bg-slate-700 hover:bg-slate-600 rounded text-sm">
                        ‚õ∂ Plein √©cran
                    </button>
                </div>
                <iframe 
                    id="iframe-v1-solo"
                    src="v1.html" 
                    class="w-full bg-white rounded-b-2xl border border-slate-700/50"
                    style="height: calc(100vh - 300px);"
                ></iframe>
            </div>

            <!-- Vue V2 seule -->
            <div id="view-v2" class="hidden iframe-container">
                <div class="bg-slate-800/50 backdrop-blur-lg rounded-t-2xl p-4 border-b border-slate-700/50 flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <span class="badge badge-v2">Version 2</span>
                        <span class="text-slate-300 font-semibold">Apr√®s feedback et versions</span>
                    </div>
                    <button onclick="openFullscreen('v2')" class="px-3 py-1 bg-slate-700 hover:bg-slate-600 rounded text-sm">
                        ‚õ∂ Plein √©cran
                    </button>
                </div>
                <iframe 
                    id="iframe-v2-solo"
                    src="v2.html" 
                    class="w-full bg-white rounded-b-2xl border border-slate-700/50"
                    style="height: calc(100vh - 300px);"
                ></iframe>
            </div>

            <!-- Vue c√¥te √† c√¥te -->
            <div id="view-split" class="grid md:grid-cols-2 gap-4">
                <!-- V1 √† gauche -->
                <div class="iframe-container">
                    <div class="bg-slate-800/50 backdrop-blur-lg rounded-t-2xl p-3 border-b border-slate-700/50 flex items-center justify-between">
                        <div class="flex items-center gap-2">
                            <span class="badge badge-v1 text-xs">V1</span>
                            <span class="text-slate-300 font-semibold text-sm">Premi√®re version</span>
                        </div>
                        <button onclick="openFullscreen('v1')" class="px-2 py-1 bg-slate-700 hover:bg-slate-600 rounded text-xs">
                            ‚õ∂
                        </button>
                    </div>
                    <iframe 
                        id="iframe-v1-split"
                        src="v1.html" 
                        class="w-full bg-white rounded-b-2xl border border-slate-700/50"
                        style="height: calc(100vh - 300px);"
                    ></iframe>
                </div>

                <!-- V2 √† droite -->
                <div class="iframe-container">
                    <div class="bg-slate-800/50 backdrop-blur-lg rounded-t-2xl p-3 border-b border-slate-700/50 flex items-center justify-between">
                        <div class="flex items-center gap-2">
                            <span class="badge badge-v2 text-xs">V2</span>
                            <span class="text-slate-300 font-semibold text-sm">Apr√®s feedback</span>
                        </div>
                        <button onclick="openFullscreen('v2')" class="px-2 py-1 bg-slate-700 hover:bg-slate-600 rounded text-xs">
                            ‚õ∂
                        </button>
                    </div>
                    <iframe 
                        id="iframe-v2-split"
                        src="v2.html" 
                        class="w-full bg-white rounded-b-2xl border border-slate-700/50"
                        style="height: calc(100vh - 300px);"
                    ></iframe>
                </div>
            </div>
        </div>

        <!-- Footer avec changements d√©taill√©s -->
        <div class="mt-6 bg-slate-800/30 backdrop-blur-lg rounded-2xl p-6 border border-slate-700/30">
            <h3 class="text-lg font-bold text-slate-200 mb-4 flex items-center gap-2">
                <span>üìã</span>
                Changements Impl√©ment√©s (V1 ‚Üí V2)
            </h3>
            <div class="grid md:grid-cols-3 gap-4 text-sm">
                <div>
                    <div class="font-semibold text-green-300 mb-2">‚úÖ Ajouts Majeurs</div>
                    <ul class="text-slate-400 space-y-1 text-xs">
                        <li>‚Ä¢ Disclaimer "worst case scenario"</li>
                        <li>‚Ä¢ M√©thodologie (81 experts)</li>
                        <li>‚Ä¢ Section Solutions compl√®te</li>
                        <li>‚Ä¢ Cadre Kunming-Montr√©al 2022</li>
                        <li>‚Ä¢ Exemple Malawi (succ√®s)</li>
                        <li>‚Ä¢ Cas Russie 2010 (historique)</li>
                    </ul>
                </div>
                <div>
                    <div class="font-semibold text-blue-300 mb-2">üîÑ Am√©liorations</div>
                    <ul class="text-slate-400 space-y-1 text-xs">
                        <li>‚Ä¢ Paradoxe 3% + "1,6 Terre"</li>
                        <li>‚Ä¢ Timeline enrichie (√©v√©nement +)</li>
                        <li>‚Ä¢ Nuances confiance d√©taill√©es</li>
                        <li>‚Ä¢ Faisabilit√© restauration</li>
                        <li>‚Ä¢ Chiffrage pr√©cis (10-50% PIB)</li>
                        <li>‚Ä¢ Sourcing transparent</li>
                    </ul>
                </div>
                <div>
                    <div class="font-semibold text-orange-300 mb-2">üìä Impact</div>
                    <ul class="text-slate-400 space-y-1 text-xs">
                        <li>‚Ä¢ √âquilibre : 100/0 ‚Üí 75/25</li>
                        <li>‚Ä¢ Cr√©dibilit√© : +40%</li>
                        <li>‚Ä¢ Solutions : 0% ‚Üí 25%</li>
                        <li>‚Ä¢ Nuances : +100%</li>
                        <li>‚Ä¢ Ton : D√©faitiste ‚Üí √âquilibr√©</li>
                        <li>‚Ä¢ Utilit√© d√©cision : +50%</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Forcer scroll en haut d√®s que possible
        if (history.scrollRestoration) {
            history.scrollRestoration = 'manual';
        }
        window.scrollTo(0, 0);
        
        // Gestion des vues
        function showView(view) {
            console.log('showView called with:', view);
            
            // Cacher toutes les vues
            const viewV1 = document.getElementById('view-v1');
            const viewV2 = document.getElementById('view-v2');
            const viewSplit = document.getElementById('view-split');
            
            console.log('Elements found:', {
                viewV1: !!viewV1,
                viewV2: !!viewV2,
                viewSplit: !!viewSplit
            });
            
            if (viewV1) viewV1.classList.add('hidden');
            if (viewV2) viewV2.classList.add('hidden');
            if (viewSplit) viewSplit.classList.add('hidden');
            
            // Retirer la classe active de tous les boutons
            const btnV1 = document.getElementById('btn-v1');
            const btnV2 = document.getElementById('btn-v2');
            const btnSplit = document.getElementById('btn-split');
            
            if (btnV1) btnV1.classList.remove('active');
            if (btnV2) btnV2.classList.remove('active');
            if (btnSplit) btnSplit.classList.remove('active');
            
            // Afficher la vue s√©lectionn√©e
            if (view === 'v1' && viewV1) {
                viewV1.classList.remove('hidden');
                if (btnV1) btnV1.classList.add('active');
                console.log('Showing V1');
            } else if (view === 'v2' && viewV2) {
                viewV2.classList.remove('hidden');
                if (btnV2) btnV2.classList.add('active');
                console.log('Showing V2');
            } else if (view === 'split' && viewSplit) {
                viewSplit.classList.remove('hidden');
                if (btnSplit) btnSplit.classList.add('active');
                console.log('Showing Split');
            }
            
            // Scroll vers le haut - plusieurs m√©thodes pour compatibilit√©
            setTimeout(() => {
                // M√©thode 1 : scrollTo moderne
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
                
                // M√©thode 2 : scroll sur document.documentElement
                document.documentElement.scrollTop = 0;
                
                // M√©thode 3 : scroll sur body
                document.body.scrollTop = 0;
                
                // M√©thode 4 : scrollIntoView sur le container principal
                const viewContainer = document.getElementById('view-container');
                if (viewContainer) {
                    viewContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            }, 100);
        }
        
        // Ouvrir en plein √©cran
        function openFullscreen(version) {
            const url = version === 'v1' ? 'v1.html' : 'v2.html';
            window.open(url, '_blank');
        }
        
        // Synchroniser le scroll des deux iframes en mode split
        let syncingScroll = false;
        
        function syncScroll(sourceId, targetId) {
            if (syncingScroll) return;
            
            syncingScroll = true;
            const source = document.getElementById(sourceId);
            const target = document.getElementById(targetId);
            
            if (source && target) {
                try {
                    const sourceDoc = source.contentDocument || source.contentWindow.document;
                    const targetDoc = target.contentDocument || target.contentWindow.document;
                    
                    if (sourceDoc && targetDoc) {
                        targetDoc.documentElement.scrollTop = sourceDoc.documentElement.scrollTop;
                    }
                } catch (e) {
                    // Ignore cross-origin errors
                }
            }
            
            setTimeout(() => { syncingScroll = false; }, 100);
        }
        
        // Initialiser avec la vue c√¥te √† c√¥te
        window.onload = function() {
            // Forcer le scroll en haut au chargement
            window.scrollTo(0, 0);
            document.documentElement.scrollTop = 0;
            document.body.scrollTop = 0;
            
            showView('split');
            
            // Force le scroll toutes les 50ms pendant 1 seconde
            // (pour contrer le chargement des iframes qui peuvent pousser le contenu)
            let scrollAttempts = 0;
            const maxAttempts = 20; // 20 x 50ms = 1 seconde
            const forceScrollInterval = setInterval(() => {
                window.scrollTo(0, 0);
                document.documentElement.scrollTop = 0;
                document.body.scrollTop = 0;
                scrollAttempts++;
                
                if (scrollAttempts >= maxAttempts) {
                    clearInterval(forceScrollInterval);
                }
            }, 50);
            
            // Optionnel : activer la synchronisation du scroll
            // (peut causer des probl√®mes de performance, d√©sactiv√© par d√©faut)
            /*
            const v1Split = document.getElementById('iframe-v1-split');
            const v2Split = document.getElementById('iframe-v2-split');
            
            if (v1Split && v2Split) {
                v1Split.contentWindow.addEventListener('scroll', () => syncScroll('iframe-v1-split', 'iframe-v2-split'));
                v2Split.contentWindow.addEventListener('scroll', () => syncScroll('iframe-v2-split', 'iframe-v1-split'));
            }
            */
        };
    </script>
</body>
</html>
